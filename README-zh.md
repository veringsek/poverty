# Poverty

> [English](./README.md) 中文

用 JSON 來儲存的記帳簿。

## 特色

### 失憶式記帳

為了解決這個問題，在交易類別中提供了 `balance` 選項。

類別 `balance` 的交易描述了一個池的結餘在某個給定的時刻是一個確定的值，他看起來如下：

```json
{
    "id": "T-2022-08-31",
    "name": "被搶",
    "type": "balance",
    "price": 16,
    "currency": "TWD",
    "time": "2022-08-31",
    "logtime": "2022-09-07",
    "note": "事發一週後我買了手機才把這筆帳記上來。",
    "source": "錢包"
}
```

這個 `balance` 交易表明了在 08-31 之前發生了一些事（顯然是搶劫）導致 `錢包` 中的錢有所變化，雖然無法確認有多少錢被搶，但我 08-31 在醫院的床上確認了 `錢包` 裡就只剩下 16 元。

交易類別 `balance` 和 `transfer` 的差異在於，在記錄這種狀況時兩者的真實性。

考慮 `錢包` 的歷史如下。為求簡潔， `type` 、 `currency` 、 `logtime` 和 `source` 都先隱藏。

```json
[{
    "id": "T-2022-08-20",
    "name": "錢包的初始資金",
    "price": 200,
    "time": "2022-08-20"
}, {
    "id": "T-2022-08-29",
    "name": "牛奶",
    "price": -30,
    "time": "2022-08-29"
}]
```

在 08-29 ──上述歷史的尾端── `錢包` 的結餘是 $200 - 30 = 170$ 元。如果用類別 `transfer` 的交易來記錄搶劫事件，那麼：

```json
[{
    "id": "T-2022-08-20",
    "name": "錢包的初始資金",
    "price": 200,
    "time": "2022-08-20"
}, {
    "id": "T-2022-08-29",
    "name": "牛奶",
    "price": -30,
    "time": "2022-08-29"
}, {
    "id": "T-2022-08-31",
    "name": "被搶",
    "type": "transfer",
    "price": -154,
    "time": "2022-08-31",
}]
```

其中，最終結餘會是 $200 - 30 - 154 = 16$ 元，這個結餘看起來確實沒錯，但這筆交易紀錄的真實性可議。因為我實際上並不知道搶匪從我的 `錢包` 搶走多少錢，我是透過被搶後確認的結餘 16 元和當時紀錄中的最終結餘 170 元，推算被搶的金額為 $170 - 16 = 154$ 元。

考慮一下，過了一個月後我的某個朋友突然還我 50 元，才發現 08-30 他急用錢所以直接從我的 `錢包` 拿走，而且事後還忘記知會我。

現在，重點不是他的行為有多機掰，重點是在我把這件事補進記帳簿後， `錢包` 的歷史會變成：

```json
[{
    "id": "T-2022-08-20",
    "name": "錢包的初始資金",
    "price": 200,
    "time": "2022-08-20"
}, {
    "id": "T-2022-08-29",
    "name": "牛奶",
    "price": -30,
    "time": "2022-08-29"
}, {
    "id": "T-2022-08-30",
    "name": "朋友借錢",
    "price": -50,
    "time": "2022-08-30"
}, {
    "id": "T-2022-08-31",
    "name": "被搶",
    "type": "transfer",
    "price": -154,
    "time": "2022-08-31",
}, {
    "id": "T-2022-10-05",
    "name": "朋友還錢",
    "price": 50,
    "time": "2022-10-05"
}]
```

你也許已經發現了， `錢包` 的最終結餘已經不再正確。因為在前方插入新的交易 `T-2022-08-30` ，使得被搶後的結餘變成 $200 - 30 - 50 - 154 = -34$，這顯然是不對的，因為我在 08-31 那天親眼確認了我的 `錢包` 裡剩下的錢不多不少就是 16 元，而不是神奇的 -34 元。

一般的記帳系統要求使用者記住交易的每個細節，包含價格、時間，包含使用者必須記住交易事件本身。但對於簡單的個人記帳，細節的遺失是難免的，也因此在 Poverty 中設計了交易類別 `balance` ：

```json
[{
    "id": "T-2022-08-20",
    "name": "錢包的初始資金",
    "type": "balance",
    "price": 200,
    "time": "2022-08-20"
}, {
    "id": "T-2022-08-29",
    "name": "牛奶",
    "type": "transfer",
    "price": -30,
    "time": "2022-08-29"
}, {
    "id": "T-2022-08-30",
    "name": "朋友借錢",
    "type": "transfer",
    "price": -50,
    "time": "2022-08-30"
}, {
    "id": "T-2022-08-31",
    "name": "被搶",
    "type": "balance",
    "price": -154,
    "time": "2022-08-31",
}, {
    "id": "T-2022-10-05",
    "name": "朋友還錢",
    "type": "transfer",
    "price": 50,
    "time": "2022-10-05"
}]
```

## 授權

[MIT](http://opensource.org/licenses/MIT)

版權所有 © 民國111年，veringsek
